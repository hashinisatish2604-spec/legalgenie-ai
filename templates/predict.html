<!DOCTYPE html>
<html>
<head>
  <title>Prediction</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-slate-900 text-white p-10">

<a href="/" class="mb-6 inline-block text-yellow-400 hover:underline text-lg">
  â¬… Back
</a>

<h1 class="text-3xl mb-6">ğŸ“„ Document Prediction</h1>

<form id="predictForm" class="space-y-4">

  <select id="language" class="input">
    <option value="en">English</option>
    <option value="hi">Hindi</option>
    <option value="kn">Kannada</option>
  </select>

  <input type="file" id="file" class="input" required>

  <button class="btn-yellow">Analyze</button>

</form>

<pre id="output" class="mt-6 bubble"></pre>

<script>
const predictForm = document.getElementById("predictForm");
const output = document.getElementById("output");
const file = document.getElementById("file");
const language = document.getElementById("language");

predictForm.onsubmit = async e => {
  e.preventDefault();

  output.textContent = "Analyzing document...";

  const fd = new FormData();
  fd.append("file", file.files[0]);
  fd.append("language", language.value);

  const res = await fetch("/predict", {
    method: "POST",
    body: fd
  });

  const data = await res.json();

  // ===== EXISTING OUTPUT (UNCHANGED) =====
  let result =
    (data.document_type || "Document Analysis") +
    "\n\n" +
    (data.analysis || "No analysis available");

  // ===== ADDITIONAL PREDICTION PARTS (SAFE) =====
  if (data.prediction) {
    result += "\n\nğŸ“Œ Prediction:\n" + data.prediction;
  }

  if (data.confidence) {
    result += "\n\nğŸ“Š Confidence:\n" + data.confidence;
  }

  if (data.risk_level) {
    result += "\n\nâš ï¸ Risk Level:\n" + data.risk_level;
  }

  if (data.sections) {
    result += "\n\nğŸ“š Relevant Sections:\n" + data.sections;
  }

  if (data.explanation) {
    result += "\n\nğŸ§  Explanation:\n" + data.explanation;
  }

  output.textContent = result;
};
</script>

<style>
.input {
  background: #1e293b;
  padding: 10px;
  border-radius: 6px;
  width: 100%;
}

.btn-yellow {
  background: #facc15;
  color: black;
  padding: 10px;
  border-radius: 6px;
  font-weight: 600;
}

.bubble {
  background: #334155;
  padding: 12px;
  border-radius: 6px;
  white-space: pre-wrap;
}
</style>

</body>
</html>
